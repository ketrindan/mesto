(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._owner=e.owner,this._selector=n,this._handleImageClick=o,this._handleDeleteClick=i,this._userId=r,this._cardId=e._id,this._handlePutLike=a,this._handleDeleteLike=u}var n,r;return n=t,(r=[{key:"_getElement",value:function(){return document.querySelector(this._selector).content.querySelector(".elements__item").cloneNode(!0)}},{key:"_toggleLike",value:function(){this._likeButton.classList.contains("elements__like_active")?this._handleDeleteLike(this._cardId):this._handlePutLike(this._cardId)}},{key:"_handleDelete",value:function(){this._handleDeleteClick(this._cardID)}},{key:"_handleImage",value:function(){this._handleImageClick(this._name,this._link)}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._toggleLike()})),this._deleteButton.addEventListener("click",(function(){e._handleDelete()})),this._cardImage.addEventListener("click",(function(){e._handleImage()}))}},{key:"likeCard",value:function(e){this._likes=e.likes,this._cardLikes.textContent=this._likes.length,this._likeButton.classList.toggle("elements__like_active")}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"createCard",value:function(){return this._element=this._getElement(),this._likeButton=this._element.querySelector(".elements__like"),this._deleteButton=this._element.querySelector(".elements__delete-btn"),this._cardImage=this._element.querySelector(".elements__image"),this._cardLikes=this._element.querySelector(".elements__like-counter"),this._cardTitle=this._element.querySelector(".elements__title"),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt="картинка ".concat(this._name),this._cardLikes.textContent=this._likes.length,this._owner._id!==this._userId&&this._deleteButton.remove(),this._setEventListeners(),this._element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=n.formSelector,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass,this._formElement=t}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_disableSubmitButton",value:function(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled","true")}},{key:"_enableSubmitButton",value:function(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}},{key:"setInitialFormState",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){var e=this;this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(n){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){var n=t._renderer(e);t.addItem(n)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscape")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".popup__close-btn")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscape)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscape)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e,t){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handleFormSubmit=t,n._formElement=n._popup.querySelector(".form"),n._inputList=function(e){if(Array.isArray(e))return s(e)}(r=n._formElement.querySelectorAll(".form__input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n._submitButton=n._formElement.querySelector(".form__submit-btn"),n._submitButtonText=n._submitButton.textContent,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValueList={},this._inputList.forEach((function(t){return e._inputValueList[t.name]=t.value})),this._inputValueList}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){e[t.name]&&(t.value=e[t.name])}))}},{key:"setEventListeners",value:function(){var e=this;f(y(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonText}},{key:"close",value:function(){f(y(a.prototype),"close",this).call(this),this._formElement.reset()}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imageLink=t._popup.querySelector(".popup__image"),t._imageSubtitle=t._popup.querySelector(".popup__image-subtitle"),t}return t=a,(n=[{key:"open",value:function(e,t){v(E(a.prototype),"open",this).call(this),this._imageLink.setAttribute("src",t),this._imageLink.setAttribute("alt","картинка ".concat(e)),this._imageSubtitle.textContent=e}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._job=document.querySelector(n),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e,t){this._name.textContent=e,this._job.textContent=t}},{key:"setAvatar",value:function(e){this._avatar.src=e}},{key:"getId",value:function(e){this._id=e._id}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=I(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function T(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._confirmButton=t._popup.querySelector(".delete-popup-btn"),t}return t=a,(n=[{key:"setSubmitCallback",value:function(e){this._submitCallback=e}},{key:"setEventListeners",value:function(){var e=this;C(q(a.prototype),"setEventListeners",this).call(this),this._confirmButton.addEventListener("click",(function(){e._submitCallback(),e.close()}))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}},{key:"getCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}},{key:"setUserData",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}},{key:"putLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}},{key:"changeAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.status))})).catch((function(e){return Promise.reject(e)}))}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=document.querySelector(".button_action_edit"),D=document.querySelector(".button_action_add"),V=document.querySelector(".profile__edit-avatar"),F=new U({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-52",headers:{authorization:"00a673b9-8570-48a8-8e0e-9115399f6375","Content-Type":"application/json"}}),N=new O(".profile__title",".profile__subtitle",".profile__avatar");F.getUserData().then((function(e){N.setUserInfo(e.name,e.about),N.setAvatar(e.avatar),N.getId(e)})).catch((function(e){console.log(e)}));var J=new _(".profile-popup",(function(e){J.renderLoading(!0),F.setUserData(e.name,e.job).then((function(e){N.setUserInfo(e.name,e.about)})).catch((function(e){console.log(e)})).finally((function(){J.renderLoading(!1)}))})),H=new _(".avatar-popup",(function(e){H.renderLoading(!0),F.changeAvatar(e.avatar).then((function(e){N.setAvatar(e.avatar)})).catch((function(e){console.log(e)})).finally((function(){H.renderLoading(!1)}))}));function M(e){var n=new t(e,"#elements-template",N._id,G.open.bind(G),(function(){K.open(),K.setSubmitCallback((function(){F.deleteCard(n._cardId).then((function(){n.deleteCard()})).catch((function(e){console.log(e)}))}))}),(function(){F.putLike(n._cardId).then((function(e){n.likeCard(e)})).catch((function(e){console.log(e)}))}),(function(){F.deleteLike(n._cardId).then((function(e){n.likeCard(e)})).catch((function(e){console.log(e)}))}));return n.createCard()}var z=new i(M,".elements__container");F.getCards().then((function(e){z.renderItems(e)})).catch((function(e){console.log(e)}));var $=new _(".elements-popup",(function(e){$.renderLoading(!0),F.addNewCard(e.place,e.link).then((function(e){z.addItem(M(e))})).catch((function(e){console.log(e)})).finally((function(){$.renderLoading(!1)}))})),G=new j(".image-popup"),K=new R(".delete-popup");J.setEventListeners(),$.setEventListeners(),G.setEventListeners(),H.setEventListeners(),K.setEventListeners(),x.addEventListener("click",(function(){J.open(),J.setInputValues(N.getUserInfo()),W["profile-form"].setInitialFormState()})),D.addEventListener("click",(function(){$.open(),W["elements-form"].setInitialFormState()})),V.addEventListener("click",(function(){H.open(),W["avatar-form"].setInitialFormState()}));var Q,W={};Q={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-btn",inactiveButtonClass:"form__submit-btn_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},Array.from(document.querySelectorAll(Q.formSelector)).forEach((function(e){var t=new r(e,Q),n=e.getAttribute("name");W[n]=t,t.enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNkxBQXFCQSxFQUFJLFdBQ3ZCLFdBQVlDLEVBQU1DLEVBQVVDLEVBQVFDLEVBQWtCQyxFQUFtQkMsRUFBZUMsSSw0RkFBa0IsU0FDeEdDLEtBQUtDLE1BQVFSLEVBQUtTLEtBQ3BCRixLQUFLRyxNQUFRVixFQUFLVyxLQUNoQkosS0FBS0ssT0FBU1osRUFBS2EsTUFDbkJOLEtBQUtPLE9BQVNkLEVBQUtlLE1BQ3JCUixLQUFLUyxVQUFZZixFQUNmTSxLQUFLVSxrQkFBb0JkLEVBQ3pCSSxLQUFLVyxtQkFBcUJkLEVBQzFCRyxLQUFLWSxRQUFVakIsRUFDZkssS0FBS2EsUUFBVXBCLEVBQUtxQixJQUNwQmQsS0FBS2UsZUFBaUJqQixFQUN0QkUsS0FBS2dCLGtCQUFvQmpCLENBQzNCLEMsUUFrRkMsTyxFQWxGQSxHLEVBQUEsMEJBR0QsV0FPRSxPQU5vQmtCLFNBQ2pCQyxjQUFjbEIsS0FBS1MsV0FDbkJVLFFBQ0FELGNBQWMsbUJBQ2RFLFdBQVUsRUFHaEIsR0FBQyx5QkFHQSxXQUNNcEIsS0FBS3FCLFlBQVlDLFVBQVVDLFNBQVMseUJBQ3RDdkIsS0FBS2dCLGtCQUFrQmhCLEtBQUthLFNBRTVCYixLQUFLZSxlQUFlZixLQUFLYSxRQUU3QixHQUFDLDJCQUdELFdBQ0ViLEtBQUtXLG1CQUFtQlgsS0FBS3dCLFFBQy9CLEdBQUMsMEJBR0QsV0FDRXhCLEtBQUtVLGtCQUFrQlYsS0FBS0MsTUFBT0QsS0FBS0csTUFDMUMsR0FBQyxnQ0FHRCxXQUFxQixXQUNuQkgsS0FBS3FCLFlBQVlJLGlCQUFpQixTQUFTLFdBQ3pDLEVBQUtDLGFBQ1AsSUFFQTFCLEtBQUsyQixjQUFjRixpQkFBaUIsU0FBUyxXQUMzQyxFQUFLRyxlQUNQLElBRUE1QixLQUFLNkIsV0FBV0osaUJBQWlCLFNBQVMsV0FDeEMsRUFBS0ssY0FDUCxHQUNILEdBQUMsc0JBR0EsU0FBU3JDLEdBQ1BPLEtBQUtLLE9BQVNaLEVBQUthLE1BQ25CTixLQUFLK0IsV0FBV0MsWUFBY2hDLEtBQUtLLE9BQU80QixPQUMxQ2pDLEtBQUtxQixZQUFZQyxVQUFVWSxPQUFPLHdCQUNwQyxHQUFDLHdCQUdELFdBQ0VsQyxLQUFLbUMsU0FBU0MsU0FDZHBDLEtBQUttQyxTQUFXLElBQ2xCLEdBQUMsd0JBR0QsV0FvQkMsT0FuQkNuQyxLQUFLbUMsU0FBV25DLEtBQUtxQyxjQUVyQnJDLEtBQUtxQixZQUFjckIsS0FBS21DLFNBQVNqQixjQUFjLG1CQUMvQ2xCLEtBQUsyQixjQUFnQjNCLEtBQUttQyxTQUFTakIsY0FBYyx5QkFDakRsQixLQUFLNkIsV0FBYTdCLEtBQUttQyxTQUFTakIsY0FBYyxvQkFDOUNsQixLQUFLK0IsV0FBYS9CLEtBQUttQyxTQUFTakIsY0FBYywyQkFDOUNsQixLQUFLc0MsV0FBYXRDLEtBQUttQyxTQUFTakIsY0FBYyxvQkFFL0NsQixLQUFLc0MsV0FBV04sWUFBY2hDLEtBQUtDLE1BQ25DRCxLQUFLNkIsV0FBV1UsSUFBTXZDLEtBQUtHLE1BQzFCSCxLQUFLNkIsV0FBV1csSUFBTSxZQUFILE9BQWV4QyxLQUFLQyxPQUN2Q0QsS0FBSytCLFdBQVdDLFlBQWNoQyxLQUFLSyxPQUFPNEIsT0FFdENqQyxLQUFLTyxPQUFPTyxNQUFRZCxLQUFLWSxTQUMzQlosS0FBSzJCLGNBQWNTLFNBR3JCcEMsS0FBS3lDLHFCQUVDekMsS0FBS21DLFFBQ2IsTSxvRUFBQyxFQS9Gc0IsRywwS0NBSk8sRUFBYSxXQUNoQyxXQUFZQyxFQUFhQyxJLDRGQUFRLFNBQ2pDNUMsS0FBSzZDLGNBQWdCRCxFQUFPRSxhQUM1QjlDLEtBQUsrQyxlQUFpQkgsRUFBT0ksY0FDN0JoRCxLQUFLaUQsc0JBQXdCTCxFQUFPTSxxQkFDcENsRCxLQUFLbUQscUJBQXVCUCxFQUFPUSxvQkFDbkNwRCxLQUFLcUQsaUJBQW1CVCxFQUFPVSxnQkFDL0J0RCxLQUFLdUQsWUFBY1gsRUFBT1ksV0FDMUJ4RCxLQUFLeUQsYUFBZWQsQ0FDcEIsQyxRQXVGQyxPLEVBckZDLEcsRUFBQSw4QkFFRixTQUFnQmUsR0FDZCxJQUFNQyxFQUFlM0QsS0FBS3lELGFBQWF2QyxjQUFjLElBQUQsT0FBS3dDLEVBQWFFLEdBQUUsV0FDeEVGLEVBQWFwQyxVQUFVdUMsSUFBSTdELEtBQUtxRCxrQkFDaENNLEVBQWFyQyxVQUFVdUMsSUFBSTdELEtBQUt1RCxhQUNoQ0ksRUFBYTNCLFlBQWMwQixFQUFhSSxpQkFDMUMsR0FBQyw2QkFHRCxTQUFnQkosR0FDZCxJQUFNQyxFQUFlM0QsS0FBS3lELGFBQWF2QyxjQUFjLElBQUQsT0FBS3dDLEVBQWFFLEdBQUUsV0FDeEVGLEVBQWFwQyxVQUFVYyxPQUFPcEMsS0FBS3FELGtCQUNuQ00sRUFBYXJDLFVBQVVjLE9BQU9wQyxLQUFLdUQsYUFDbkNJLEVBQWEzQixZQUFjLEVBQzdCLEdBR0EsaUNBRUEsU0FBb0IwQixHQUNiQSxFQUFhSyxTQUFTQyxNQUd6QmhFLEtBQUtpRSxnQkFBZ0JQLEdBRnJCMUQsS0FBS2tFLGdCQUFnQlIsRUFJekIsR0FBQyw4QkFHRCxXQUNFLE9BQU8xRCxLQUFLbUUsV0FBV0MsTUFBSyxTQUFDVixHQUMzQixPQUFRQSxFQUFhSyxTQUFTQyxLQUNoQyxHQUNGLEdBR0Esa0NBRUEsV0FDRWhFLEtBQUtxRSxjQUFjL0MsVUFBVXVDLElBQUk3RCxLQUFLbUQsc0JBQ3RDbkQsS0FBS3FFLGNBQWNDLGFBQWEsV0FBWSxPQUM5QyxHQUFDLGlDQUdELFdBQ0V0RSxLQUFLcUUsY0FBYy9DLFVBQVVjLE9BQU9wQyxLQUFLbUQsc0JBQ3pDbkQsS0FBS3FFLGNBQWNFLGdCQUFnQixXQUNyQyxHQUFDLGdDQUdELFdBQ012RSxLQUFLd0UsbUJBQ1B4RSxLQUFLeUUsdUJBRUx6RSxLQUFLMEUscUJBRVQsR0FFQSxpQ0FFQSxXQUFzQixXQUdwQjFFLEtBQUttRSxXQUFXUSxTQUFRLFNBQUNqQixHQUN2QixFQUFLTyxnQkFBZ0JQLEVBQ3ZCLElBRUExRCxLQUFLNEUsb0JBQ1AsR0FBQyw4QkFHRCxXQUFtQixXQUNqQjVFLEtBQUtxRSxjQUFnQnJFLEtBQUt5RCxhQUFhdkMsY0FBY2xCLEtBQUtpRCx1QkFDMURqRCxLQUFLbUUsV0FBY1UsTUFBTUMsS0FBSzlFLEtBQUt5RCxhQUFhc0IsaUJBQWlCL0UsS0FBSytDLGlCQUl0RS9DLEtBQUs0RSxxQkFFTDVFLEtBQUttRSxXQUFXUSxTQUFRLFNBQUNqQixHQUN2QkEsRUFBYWpDLGlCQUFpQixTQUFTLFNBQUN1RCxHQUN0QyxFQUFLQyxvQkFBb0J2QixHQUN6QixFQUFLa0Isb0JBQ1AsR0FDRixHQUNGLE0sb0VBQUMsRUFoRytCLEcsMEtDQWJNLEVBQU8sV0FDMUIsV0FBWUMsRUFBVUMsSSw0RkFBbUIsU0FDdkNwRixLQUFLcUYsVUFBWUYsRUFDbkJuRixLQUFLc0YsV0FBYXJFLFNBQVNDLGNBQWNrRSxFQUN6QyxDLFFBV0MsTyxFQVhBLEcsRUFBQSwwQkFFRCxTQUFZRyxHQUFPLFdBQ2pCQSxFQUFNWixTQUFRLFNBQUNhLEdBQ2IsSUFBTUMsRUFBTyxFQUFLSixVQUFVRyxHQUM1QixFQUFLRSxRQUFRRCxFQUNmLEdBQ0YsR0FBQyxxQkFFRCxTQUFRRSxHQUNOM0YsS0FBS3NGLFdBQVdNLFFBQVFELEVBQzFCLE0sb0VBQUMsRUFmeUIsRywwS0NBUEUsRUFBSyxXQUN4QixXQUFZQyxHQUFlLEksSUFBQSxRLDRGQUFBLFMsRUFrQlgsU0FBQ2QsR0FDQyxXQUFaQSxFQUFJZSxLQUNOLEVBQUtDLE9BRVQsRyxFQXRCMkIsd0Isc0JBQUEsSyx1REFBQSxLLEtBQ3pCaEcsS0FBS2lHLE9BQVNoRixTQUFTQyxjQUFjNEUsR0FDckM5RixLQUFLa0csYUFBZWxHLEtBQUtpRyxPQUFPL0UsY0FBYyxvQkFDaEQsQyxRQWdDQyxPLEVBaENBLEcsRUFBQSxtQkFHRCxXQUNFbEIsS0FBS2lHLE9BQU8zRSxVQUFVdUMsSUFBSSxnQkFDMUI1QyxTQUFTUSxpQkFBaUIsVUFBV3pCLEtBQUttRyxjQUM1QyxHQUFDLG1CQUdELFdBQ0VuRyxLQUFLaUcsT0FBTzNFLFVBQVVjLE9BQU8sZ0JBQzdCbkIsU0FBU21GLG9CQUFvQixVQUFXcEcsS0FBS21HLGNBQy9DLEdBQUMsK0JBVUQsV0FBb0IsV0FDbEJuRyxLQUFLa0csYUFBYXpFLGlCQUFpQixTQUFTLFdBQzFDLEVBQUt1RSxPQUNQLElBRUFoRyxLQUFLaUcsT0FBT3hFLGlCQUFpQixhQUFhLFNBQUN1RCxHQUNyQ0EsRUFBSXFCLFNBQVdyQixFQUFJc0IsZUFDckIsRUFBS04sT0FFVCxHQUNGLE0sb0VBQUMsRUFwQ3VCLEcsKzJDQ0FpQixJQUV0Qk8sRUFBYSxhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFDaEMsV0FBWVQsRUFBZVUsR0FBa0IsTSxFQU1hLE8sNEZBTmIsVUFDM0MsY0FBTVYsSUFDRFcsa0JBQW9CRCxFQUN6QixFQUFLL0MsYUFBZSxFQUFLd0MsT0FBTy9FLGNBQWMsU0FDOUMsRUFBS2lELFcsK0NBQWlCLEVBQUtWLGFBQWFzQixpQkFBaUIsa0IsZ2tCQUN6RCxFQUFLVixjQUFnQixFQUFLWixhQUFhdkMsY0FBYyxxQkFDckQsRUFBS3dGLGtCQUFvQixFQUFLckMsY0FBY3JDLFlBQVksQ0FDMUQsQ0EyQ0MsTyxFQTNDQSxHLEVBQUEsOEJBR0QsV0FBa0IsV0FJaEIsT0FIQWhDLEtBQUsyRyxnQkFBa0IsQ0FBQyxFQUN4QjNHLEtBQUttRSxXQUFXUSxTQUFRLFNBQUFpQyxHQUFLLE9BQUksRUFBS0QsZ0JBQWdCQyxFQUFNMUcsTUFBUTBHLEVBQU1DLEtBQUssSUFFeEU3RyxLQUFLMkcsZUFDZCxHQUFDLDRCQUdELFNBQWVHLEdBQ2I5RyxLQUFLbUUsV0FBV1EsU0FBUSxTQUFDaUMsR0FDbkJFLEVBQWVGLEVBQU0xRyxRQUN2QjBHLEVBQU1DLE1BQVFDLEVBQWVGLEVBQU0xRyxNQUV2QyxHQUNGLEdBQUMsK0JBR0QsV0FBb0IsV0FDbEIsc0RBQ0FGLEtBQUt5RCxhQUFhaEMsaUJBQWlCLFVBQVUsU0FBQ3VELEdBQzVDQSxFQUFJK0IsaUJBQ0osRUFBS04sa0JBQWtCLEVBQUtPLG1CQUU1QixFQUFLaEIsT0FDUCxHQUNGLEdBQUMsMkJBR0QsU0FBY2lCLEdBRVZqSCxLQUFLcUUsY0FBY3JDLFlBRGpCaUYsRUFDK0IsZ0JBRUFqSCxLQUFLMEcsaUJBRTFDLEdBQUMsbUJBR0QsV0FDRSwwQ0FDQTFHLEtBQUt5RCxhQUFheUQsT0FDcEIsTSxvRUFBQyxFQW5EK0IsQ0FBU3JCLEcscXdDQ0ZBLElBRXRCc0IsRUFBYyxhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFDakMsV0FBWXJCLEdBQWUsTUFHaUQsTyw0RkFIakQsVUFDekIsY0FBTUEsSUFDRHNCLFdBQWEsRUFBS25CLE9BQU8vRSxjQUFjLGlCQUM1QyxFQUFLbUcsZUFBaUIsRUFBS3BCLE9BQU8vRSxjQUFjLDBCQUEwQixDQUM1RSxDQU9DLE8sRUFQQSxHLEVBQUEsbUJBRUQsU0FBS2hCLEVBQU1FLEdBQ1QseUNBQ0FKLEtBQUtvSCxXQUFXOUMsYUFBYSxNQUFPbEUsR0FDcENKLEtBQUtvSCxXQUFXOUMsYUFBYSxNQUFPLFlBQUYsT0FBY3BFLElBQ2hERixLQUFLcUgsZUFBZXJGLFlBQWM5QixDQUNwQyxNLG9FQUFDLEVBWmdDLENBQVMyRixHLDBLQ0Z2QnlCLEVBQVEsV0FDM0IsV0FBWUMsRUFBY0MsRUFBYUMsSSw0RkFBZ0IsU0FDckR6SCxLQUFLQyxNQUFRZ0IsU0FBU0MsY0FBY3FHLEdBQ3BDdkgsS0FBSzBILEtBQU96RyxTQUFTQyxjQUFjc0csR0FDbkN4SCxLQUFLMkgsUUFBVTFHLFNBQVNDLGNBQWN1RyxFQUN4QyxDLFFBcUJDLE8sRUFyQkEsRyxFQUFBLDBCQUdELFdBQ0UsTUFBTyxDQUNMdkgsS0FBTUYsS0FBS0MsTUFBTStCLFlBQ2pCNEYsSUFBSzVILEtBQUswSCxLQUFLMUYsWUFFbkIsR0FBQyx5QkFFRCxTQUFZOUIsRUFBTTBILEdBQ2hCNUgsS0FBS0MsTUFBTStCLFlBQWM5QixFQUN6QkYsS0FBSzBILEtBQUsxRixZQUFjNEYsQ0FDMUIsR0FBQyx1QkFFRCxTQUFVQyxHQUNSN0gsS0FBSzJILFFBQVFwRixJQUFNc0YsQ0FDckIsR0FBQyxtQkFFRCxTQUFNcEksR0FDSk8sS0FBS2MsSUFBTXJCLEVBQUtxQixHQUNsQixNLG9FQUFDLEVBMUIwQixHLHF3Q0NBRSxJQUVWZ0gsRUFBcUIsYSxxUkFBQSxVLFFBQUEsRyxFQUFBLEUsK1lBQ3hDLFdBQVloQyxHQUFlLE1BRTRDLE8sNEZBRjVDLFVBQ3pCLGNBQU1BLElBQ0RpQyxlQUFpQixFQUFLOUIsT0FBTy9FLGNBQWMscUJBQXFCLENBQ3ZFLENBYUMsTyxFQWJBLEcsRUFBQSxnQ0FFRCxTQUFrQjhHLEdBQ2hCaEksS0FBS2lJLGdCQUFrQkQsQ0FDekIsR0FBQywrQkFFRCxXQUFvQixXQUNsQixzREFDQWhJLEtBQUsrSCxlQUFldEcsaUJBQWlCLFNBQVMsV0FDNUMsRUFBS3dHLGtCQUVMLEVBQUtqQyxPQUNQLEdBQ0YsTSxvRUFBQyxFQWpCdUMsQ0FBU0gsRywwS0NGOUJxQyxFQUFHLFdBQ3RCLFdBQWF0RixJLDRGQUFRLFNBQ25CNUMsS0FBS21JLFNBQVd2RixFQUFPd0YsUUFDdkJwSSxLQUFLcUksU0FBV3pGLEVBQU8wRixPQUN6QixDLFFBNkhDLE8sRUE3SEEsRyxFQUFBLDBCQUdELFdBQ0UsT0FBT0MsTUFBTSxHQUFELE9BQUl2SSxLQUFLbUksU0FBUSxhQUFhLENBQUNHLFFBQVN0SSxLQUFLcUksV0FDeERHLE1BQUssU0FBQ0MsR0FDTCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUdOQyxRQUFRQyxPQUFPLElBQUlDLE1BQU1MLEVBQUlNLFFBQ3RDLElBQ0NDLE9BQU0sU0FBQ0MsR0FBRyxPQUFLTCxRQUFRQyxPQUFPSSxFQUFJLEdBQ3JDLEdBQUMsc0JBR0QsV0FDRSxPQUFPVixNQUFNLEdBQUQsT0FBSXZJLEtBQUttSSxTQUFRLFVBQVUsQ0FBQ0csUUFBU3RJLEtBQUtxSSxXQUNyREcsTUFBSyxTQUFDQyxHQUNMLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BR05DLFFBQVFDLE9BQU8sSUFBSUMsTUFBTUwsRUFBSU0sUUFDdEMsSUFDQ0MsT0FBTSxTQUFDQyxHQUFHLE9BQUtMLFFBQVFDLE9BQU9JLEVBQUksR0FDckMsR0FBQyx5QkFHRCxTQUFZL0ksRUFBTTBILEdBQ2hCLE9BQU9XLE1BQU0sR0FBRCxPQUFJdkksS0FBS21JLFNBQVEsYUFDM0IsQ0FBQ2UsT0FBUSxRQUNUWixRQUFTdEksS0FBS3FJLFNBQ2RjLEtBQU1DLEtBQUtDLFVBQVUsQ0FBQ25KLEtBQU1BLEVBQU1vSixNQUFPMUIsTUFFMUNZLE1BQUssU0FBQ0MsR0FDTCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUdOQyxRQUFRQyxPQUFPLElBQUlDLE1BQU1MLEVBQUlNLFFBQ3RDLElBQ0NDLE9BQU0sU0FBQ0MsR0FBRyxPQUFLTCxRQUFRQyxPQUFPSSxFQUFJLEdBQ3JDLEdBQUMsd0JBR0QsU0FBV00sRUFBT25KLEdBQ2hCLE9BQU9tSSxNQUFNLEdBQUQsT0FBSXZJLEtBQUttSSxTQUFRLFVBQzNCLENBQUNlLE9BQVEsT0FDVFosUUFBU3RJLEtBQUtxSSxTQUNkYyxLQUFNQyxLQUFLQyxVQUFVLENBQUNuSixLQUFNcUosRUFBT25KLEtBQU1BLE1BRTFDb0ksTUFBSyxTQUFDQyxHQUNMLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BR05DLFFBQVFDLE9BQU8sSUFBSUMsTUFBTUwsRUFBSU0sUUFDdEMsSUFDQ0MsT0FBTSxTQUFDQyxHQUFHLE9BQUtMLFFBQVFDLE9BQU9JLEVBQUksR0FDckMsR0FBQyx3QkFHRCxTQUFXTyxHQUNULE9BQU9qQixNQUFNLEdBQUQsT0FBSXZJLEtBQUttSSxTQUFRLGtCQUFVcUIsR0FDckMsQ0FBQ04sT0FBUSxTQUNUWixRQUFTdEksS0FBS3FJLFdBRWZHLE1BQUssU0FBQ0MsR0FDTCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUdOQyxRQUFRQyxPQUFPLElBQUlDLE1BQU1MLEVBQUlNLFFBQ3RDLElBQ0NDLE9BQU0sU0FBQ0MsR0FBRyxPQUFLTCxRQUFRQyxPQUFPSSxFQUFJLEdBQ3JDLEdBQUMscUJBR0QsU0FBUU8sR0FDTixPQUFPakIsTUFBTSxHQUFELE9BQUl2SSxLQUFLbUksU0FBUSxrQkFBVXFCLEVBQU0sVUFDM0MsQ0FBQ04sT0FBUSxNQUNUWixRQUFTdEksS0FBS3FJLFdBRWZHLE1BQUssU0FBQ0MsR0FDTCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUdOQyxRQUFRQyxPQUFPLElBQUlDLE1BQU1MLEVBQUlNLFFBQ3RDLElBQ0NDLE9BQU0sU0FBQ0MsR0FBRyxPQUFLTCxRQUFRQyxPQUFPSSxFQUFJLEdBQ3JDLEdBQUMsd0JBR0QsU0FBV08sR0FDVCxPQUFPakIsTUFBTSxHQUFELE9BQUl2SSxLQUFLbUksU0FBUSxrQkFBVXFCLEVBQU0sVUFDM0MsQ0FBQ04sT0FBUSxTQUNUWixRQUFTdEksS0FBS3FJLFdBRWZHLE1BQUssU0FBQ0MsR0FDTCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUdOQyxRQUFRQyxPQUFPLElBQUlDLE1BQU1MLEVBQUlNLFFBQ3RDLElBQ0NDLE9BQU0sU0FBQ0MsR0FBRyxPQUFLTCxRQUFRQyxPQUFPSSxFQUFJLEdBQ3JDLEdBQUMsMEJBR0QsU0FBYVEsR0FDWCxPQUFPbEIsTUFBTSxHQUFELE9BQUl2SSxLQUFLbUksU0FBUSxvQkFDN0IsQ0FBQ2UsT0FBUSxRQUNUWixRQUFTdEksS0FBS3FJLFNBQ2RjLEtBQU1DLEtBQUtDLFVBQVUsQ0FBQ0ksT0FBUUEsTUFFN0JqQixNQUFLLFNBQUNDLEdBQ0wsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FHTkMsUUFBUUMsT0FBTyxJQUFJQyxNQUFNTCxFQUFJTSxRQUN0QyxJQUNDQyxPQUFNLFNBQUNDLEdBQUcsT0FBS0wsUUFBUUMsT0FBT0ksRUFBSSxHQUNyQyxNLG9FQUFDLEVBaklxQixHQ1lsQlMsRUFBYXpJLFNBQVNDLGNBQWMsdUJBQ3BDeUksRUFBWTFJLFNBQVNDLGNBQWMsc0JBQ25DMEksRUFBcUIzSSxTQUFTQyxjQUFjLHlCQVc1QzJJLEVBQU0sSUFBSTNCLEVBUkUsQ0FDaEJFLFFBQVMsOENBQ1RFLFFBQVMsQ0FDUHdCLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBU2RDLEVBQVcsSUFBSXpDLEVBQVMsa0JBQW1CLHFCQUFzQixvQkFFdkV1QyxFQUFJRyxjQUNIeEIsTUFBSyxTQUFDL0ksR0FDSHNLLEVBQVNFLFlBQVl4SyxFQUFLUyxLQUFNVCxFQUFLNkosT0FDckNTLEVBQVNHLFVBQVV6SyxFQUFLZ0ssUUFDeEJNLEVBQVNJLE1BQU0xSyxFQUNuQixJQUNDdUosT0FBTSxTQUFDQyxHQUNObUIsUUFBUUMsSUFBSXBCLEVBQ2QsSUFLQSxJQUFNcUIsRUFBZSxJQUFJL0QsRUFBYyxrQkFBa0IsU0FBQ08sR0FDeER3RCxFQUFhQyxlQUFjLEdBQzNCVixFQUFJVyxZQUFZMUQsRUFBZTVHLEtBQU00RyxFQUFlYyxLQUNuRFksTUFBSyxTQUFDL0ksR0FDTHNLLEVBQVNFLFlBQVl4SyxFQUFLUyxLQUFNVCxFQUFLNkosTUFDdkMsSUFDQ04sT0FBTSxTQUFDQyxHQUNObUIsUUFBUUMsSUFBSXBCLEVBQ2QsSUFDQ3dCLFNBQVEsV0FDUEgsRUFBYUMsZUFBYyxFQUM3QixHQUNGLElBS01HLEVBQWMsSUFBSW5FLEVBQWMsaUJBQWlCLFNBQUNPLEdBQ3RENEQsRUFBWUgsZUFBYyxHQUMxQlYsRUFBSWMsYUFBYTdELEVBQWUyQyxRQUMvQmpCLE1BQUssU0FBQy9JLEdBQ0xzSyxFQUFTRyxVQUFVekssRUFBS2dLLE9BQzFCLElBQ0NULE9BQU0sU0FBQ0MsR0FDTm1CLFFBQVFDLElBQUlwQixFQUNkLElBQ0N3QixTQUFRLFdBQ1BDLEVBQVlILGVBQWMsRUFDNUIsR0FDRixJQUtBLFNBQVNLLEVBQVduTCxHQUNsQixJQUFNZ0csRUFBTyxJQUFJakcsRUFBS0MsRUFBTSxxQkFBc0JzSyxFQUFTakosSUFBSytKLEVBQVdDLEtBQUtDLEtBQUtGLElBQ25GLFdBQ0VHLEVBQVlGLE9BQ1pFLEVBQVlDLG1CQUFrQixXQUM1QnBCLEVBQUlxQixXQUFXekYsRUFBSzVFLFNBQ25CMkgsTUFBSyxXQUNKL0MsRUFBS3lGLFlBQ1AsSUFDQ2xDLE9BQU0sU0FBQ0MsR0FDTm1CLFFBQVFDLElBQUlwQixFQUNkLEdBQ0YsR0FDRixJQUNBLFdBQ0VZLEVBQUlzQixRQUFRMUYsRUFBSzVFLFNBQ2hCMkgsTUFBSyxTQUFDQyxHQUNMaEQsRUFBSzJGLFNBQVMzQyxFQUNoQixJQUNDTyxPQUFNLFNBQUNDLEdBQ05tQixRQUFRQyxJQUFJcEIsRUFDZCxHQUNGLElBQ0EsV0FDRVksRUFBSXdCLFdBQVc1RixFQUFLNUUsU0FDbkIySCxNQUFLLFNBQUNDLEdBQ0xoRCxFQUFLMkYsU0FBUzNDLEVBQ2hCLElBQ0NPLE9BQU0sU0FBQ0MsR0FDTm1CLFFBQVFDLElBQUlwQixFQUNkLEdBQ0YsSUFLRixPQUZtQnhELEVBQUttRixZQUcxQixDQUdBLElBQU1VLEVBQVksSUFBSXBHLEVBQVEwRixFQUFZLHdCQUUxQ2YsRUFBSTBCLFdBQ0gvQyxNQUFLLFNBQUNDLEdBQ0w2QyxFQUFVRSxZQUFZL0MsRUFDeEIsSUFDQ08sT0FBTSxTQUFDQyxHQUNObUIsUUFBUUMsSUFBSXBCLEVBQ2QsSUFLQSxJQUFNd0MsRUFBZ0IsSUFBSWxGLEVBQWMsbUJBQW1CLFNBQUNPLEdBQzFEMkUsRUFBY2xCLGVBQWMsR0FDNUJWLEVBQUk2QixXQUFXNUUsRUFBZXlDLE1BQU96QyxFQUFlMUcsTUFDbkRvSSxNQUFLLFNBQUMvSSxHQUNMNkwsRUFBVTVGLFFBQVFrRixFQUFXbkwsR0FDL0IsSUFDQ3VKLE9BQU0sU0FBQ0MsR0FDTm1CLFFBQVFDLElBQUlwQixFQUNkLElBQ0N3QixTQUFRLFdBQ1BnQixFQUFjbEIsZUFBYyxFQUM5QixHQUNGLElBR01NLEVBQWEsSUFBSTFELEVBQWUsZ0JBRWhDNkQsRUFBYyxJQUFJbEQsRUFBc0IsaUJBRzlDd0MsRUFBYXFCLG9CQUViRixFQUFjRSxvQkFFZGQsRUFBV2Msb0JBRVhqQixFQUFZaUIsb0JBRVpYLEVBQVlXLG9CQUtaakMsRUFBV2pJLGlCQUFpQixTQUFTLFdBQ25DNkksRUFBYVEsT0FDYlIsRUFBYXNCLGVBQWU3QixFQUFTOEIsZUFFckNDLEVBQWUsZ0JBQWdCQyxxQkFDakMsSUFHQXBDLEVBQVVsSSxpQkFBaUIsU0FBUyxXQUNsQ2dLLEVBQWNYLE9BRWRnQixFQUFlLGlCQUFpQkMscUJBQ2xDLElBR0FuQyxFQUFtQm5JLGlCQUFpQixTQUFTLFdBQzNDaUosRUFBWUksT0FFWmdCLEVBQWUsZUFBZUMscUJBQ2hDLElBS0EsSUFZMEJuSixFQUZwQmtKLEVBQWlCLENBQUMsRUFFRWxKLEVBWkQsQ0FDdkJFLGFBQWMsUUFDZEUsY0FBZSxlQUNmRSxxQkFBc0Isb0JBQ3RCRSxvQkFBcUIsNEJBQ3JCRSxnQkFBaUIseUJBQ2pCRSxXQUFZLDRCQU9LcUIsTUFBTUMsS0FBSzdELFNBQVM4RCxpQkFBaUJuQyxFQUFPRSxlQUNwRDZCLFNBQVEsU0FBQ2hDLEdBQ2hCLElBQU1xSixFQUFZLElBQUl0SixFQUFjQyxFQUFhQyxHQUUzQ3FKLEVBQVd0SixFQUFZdUosYUFBYSxRQUUxQ0osRUFBZUcsR0FBWUQsRUFFM0JBLEVBQVVHLGtCQUNaLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCB1c2VySWQsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVQdXRMaWtlLCBoYW5kbGVEZWxldGVMaWtlKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcblx0XHR0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XG5cdFx0dGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9oYW5kbGVQdXRMaWtlID0gaGFuZGxlUHV0TGlrZTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVMaWtlID0gaGFuZGxlRGVsZXRlTGlrZTtcbiAgfVxuXG5cbiAgX2dldEVsZW1lbnQoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faXRlbScpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuXHR9XG5cblxuICBfdG9nZ2xlTGlrZSgpIHtcbiAgICBpZiAodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2VsZW1lbnRzX19saWtlX2FjdGl2ZScpKSB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVMaWtlKHRoaXMuX2NhcmRJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hhbmRsZVB1dExpa2UodGhpcy5fY2FyZElkKTtcbiAgICB9XG4gIH1cblxuXG4gIF9oYW5kbGVEZWxldGUoKSB7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fY2FyZElEKTtcbiAgfVxuXG5cbiAgX2hhbmRsZUltYWdlKCkge1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gIH1cblxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZSgpO1xuICAgIH0pO1xuIH1cblxuXG4gIGxpa2VDYXJkKGRhdGEpIHtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudHNfX2xpa2VfYWN0aXZlJyk7XG4gIH1cblxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlJyk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2RlbGV0ZS1idG4nKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faW1hZ2UnKTtcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZS1jb3VudGVyJyk7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX3RpdGxlJyk7XG5cbiAgXHR0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICBcdHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBg0LrQsNGA0YLQuNC90LrQsCAke3RoaXMuX25hbWV9YDtcbiAgICB0aGlzLl9jYXJkTGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICBpZiAodGhpcy5fb3duZXIuX2lkICE9PSB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIFx0cmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBjb25maWcpIHtcbiAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICAgIC8qINCh0LrRgNGL0YLRjC/Qv9C+0LrQsNC30LDRgtGMINC+0YjQuNCx0LrQuCAqL1xuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cblxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuXG5cbiAgLyog0J/RgNC+0LLQtdGA0LrQsCDQv9C+0LvQtdC5ICovXG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cblxuICAvKiDQmtC90L7Qv9C60LggKi9cblxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICB9XG5cblxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgfVxuXG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpXG4gICAgfVxuICB9XG5cbiAgLyog0JLQsNC70LjQtNCw0YbQuNGPICovXG5cbiAgc2V0SW5pdGlhbEZvcm1TdGF0ZSgpIHtcbiAgICAvKmNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5faW5wdXQpOyovXG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKVxuICB9XG5cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0TGlzdCAgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuXG4gICAgLypjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2lucHV0KTsqL1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKVxuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXHRcdHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICB0aGlzLmFkZEl0ZW0oY2FyZCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idG4nKTtcbiAgfVxuXG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjYXBlKTtcbiAgfVxuXG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY2FwZSk7XG4gIH1cblxuXG4gIF9oYW5kbGVFc2NhcGUgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc3VibWl0LWJ0bicpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gIH1cblxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlTGlzdCA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHRoaXMuX2lucHV0VmFsdWVMaXN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVMaXN0O1xuICB9XG5cblxuICBzZXRJbnB1dFZhbHVlcyhpbnB1dFZhbHVlTGlzdCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaWYgKGlucHV0VmFsdWVMaXN0W2lucHV0Lm5hbWVdKSB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gaW5wdXRWYWx1ZUxpc3RbaW5wdXQubmFtZV1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KVxuICB9XG5cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlTGluayA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICB0aGlzLl9pbWFnZVN1YnRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1zdWJ0aXRsZScpO1xuICB9XG5cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2ltYWdlTGluay5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGluayk7XG4gICAgdGhpcy5faW1hZ2VMaW5rLnNldEF0dHJpYnV0ZShcImFsdFwiLCBg0LrQsNGA0YLQuNC90LrQsCAke25hbWV9YCk7XG4gICAgdGhpcy5faW1hZ2VTdWJ0aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cblxuICBzZXRBdmF0YXIodXJsKSB7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVybDtcbiAgfVxuXG4gIGdldElkKGRhdGEpIHtcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY29uZmlybUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtcG9wdXAtYnRuJyk7XG4gIH1cblxuICBzZXRTdWJtaXRDYWxsYmFjayhjYWxsYmFjaykge1xuICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjaygpO1xuXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSlcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG4gIH1cblxuXG4gIGdldFVzZXJEYXRhKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtoZWFkZXJzOiB0aGlzLl9oZWFkZXJzfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5zdGF0dXMpKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IFByb21pc2UucmVqZWN0KGVycikpXG4gIH1cblxuXG4gIGdldENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtoZWFkZXJzOiB0aGlzLl9oZWFkZXJzfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5zdGF0dXMpKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IFByb21pc2UucmVqZWN0KGVycikpXG4gIH1cblxuXG4gIHNldFVzZXJEYXRhKG5hbWUsIGpvYikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsXG4gICAgICB7bWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtuYW1lOiBuYW1lLCBhYm91dDogam9ifSlcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLnN0YXR1cykpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gUHJvbWlzZS5yZWplY3QoZXJyKSlcbiAgfVxuXG5cbiAgYWRkTmV3Q2FyZChwbGFjZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsXG4gICAgICB7bWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe25hbWU6IHBsYWNlLCBsaW5rOiBsaW5rfSlcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLnN0YXR1cykpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gUHJvbWlzZS5yZWplY3QoZXJyKSlcbiAgfVxuXG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCxcbiAgICAgIHttZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLnN0YXR1cykpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gUHJvbWlzZS5yZWplY3QoZXJyKSlcbiAgfVxuXG5cbiAgcHV0TGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCxcbiAgICAgIHttZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLnN0YXR1cykpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gUHJvbWlzZS5yZWplY3QoZXJyKSlcbiAgfVxuXG5cbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCxcbiAgICAgIHttZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLnN0YXR1cykpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gUHJvbWlzZS5yZWplY3QoZXJyKSlcbiAgfVxuXG5cbiAgY2hhbmdlQXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLFxuICAgIHttZXRob2Q6ICdQQVRDSCcsXG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7YXZhdGFyOiBhdmF0YXJ9KVxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMuc3RhdHVzKSlcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBQcm9taXNlLnJlamVjdChlcnIpKVxuICB9XG59XG5cbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcblxuXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9hY3Rpb25fZWRpdCcpO1xuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9hY3Rpb25fYWRkJyk7XG5jb25zdCBjaGFuZ2VBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXInKTtcblxuXG5jb25zdCBhcGlDb25maWcgPSB7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTUyJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICcwMGE2NzNiOS04NTcwLTQ4YTgtOGUwZS05MTE1Mzk5ZjYzNzUnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufTtcblxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlDb25maWcpO1xuXG5cbi8qINCY0L3RhNC+0YDQvNCw0YbQuNGPINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSAqL1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygnLnByb2ZpbGVfX3RpdGxlJywgJy5wcm9maWxlX19zdWJ0aXRsZScsICcucHJvZmlsZV9fYXZhdGFyJyk7XG5cbmFwaS5nZXRVc2VyRGF0YSgpXG4udGhlbigoZGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dCk7XG4gICAgdXNlckluZm8uc2V0QXZhdGFyKGRhdGEuYXZhdGFyKTtcbiAgICB1c2VySW5mby5nZXRJZChkYXRhKTtcbn0pXG4uY2F0Y2goKGVycikgPT4ge1xuICBjb25zb2xlLmxvZyhlcnIpXG59KVxuXG5cbi8qINCf0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQuNC90YTRiyDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUgKi9cblxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wcm9maWxlLXBvcHVwJywgKGlucHV0VmFsdWVMaXN0KSA9PiB7XG4gIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGkuc2V0VXNlckRhdGEoaW5wdXRWYWx1ZUxpc3QubmFtZSwgaW5wdXRWYWx1ZUxpc3Quam9iKVxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSlcbiAgLmZpbmFsbHkoKCkgPT4ge1xuICAgIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgfSlcbn0pXG5cblxuLyog0J/QvtC/0LDQvyDQsNCy0LDRgtCw0YDQsCAqL1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcuYXZhdGFyLXBvcHVwJywgKGlucHV0VmFsdWVMaXN0KSA9PiB7XG4gIGF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5jaGFuZ2VBdmF0YXIoaW5wdXRWYWx1ZUxpc3QuYXZhdGFyKVxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldEF2YXRhcihkYXRhLmF2YXRhcik7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSlcbiAgLmZpbmFsbHkoKCkgPT4ge1xuICAgIGF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICB9KVxufSlcblxuXG4vKiDQntGC0YDQuNGB0L7QstC60LAg0LrQsNGA0YLQvtGH0LXQuiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsICcjZWxlbWVudHMtdGVtcGxhdGUnLCB1c2VySW5mby5faWQsIGltYWdlUG9wdXAub3Blbi5iaW5kKGltYWdlUG9wdXApLFxuICAgICgpID0+IHtcbiAgICAgIGRlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgICAgIGRlbGV0ZVBvcHVwLnNldFN1Ym1pdENhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5fY2FyZElkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSxcbiAgICAoKSA9PiB7XG4gICAgICBhcGkucHV0TGlrZShjYXJkLl9jYXJkSWQpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNhcmQubGlrZUNhcmQocmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICB9LFxuICAgICgpID0+IHtcbiAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmQuX2NhcmRJZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgIH1cbiAgKVxuXG5cdGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5jcmVhdGVDYXJkKCk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50XG59XG5cblxuY29uc3Qg0YFhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKGNyZWF0ZUNhcmQsICcuZWxlbWVudHNfX2NvbnRhaW5lcicpO1xuXG5hcGkuZ2V0Q2FyZHMoKVxuLnRoZW4oKHJlcykgPT4ge1xuICDRgWFyZHNMaXN0LnJlbmRlckl0ZW1zKHJlcyk7XG59KVxuLmNhdGNoKChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn0pO1xuXG5cbi8qINCf0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG5jb25zdCBlbGVtZW50c1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5lbGVtZW50cy1wb3B1cCcsIChpbnB1dFZhbHVlTGlzdCkgPT4ge1xuICBlbGVtZW50c1BvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5hZGROZXdDYXJkKGlucHV0VmFsdWVMaXN0LnBsYWNlLCBpbnB1dFZhbHVlTGlzdC5saW5rKVxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgINGBYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KVxuICAuZmluYWxseSgoKSA9PiB7XG4gICAgZWxlbWVudHNQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgfSlcbn0pXG5cblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLmltYWdlLXBvcHVwJyk7XG5cbmNvbnN0IGRlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbignLmRlbGV0ZS1wb3B1cCcpXG5cblxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVsZW1lbnRzUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbi8qINCe0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LrQvdC+0L/QvtC6Ki9cblxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbiAgcHJvZmlsZVBvcHVwLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xuXG4gIGZvcm1WYWxpZGF0b3JzWydwcm9maWxlLWZvcm0nXS5zZXRJbml0aWFsRm9ybVN0YXRlKCk7XG59KTtcblxuXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGVsZW1lbnRzUG9wdXAub3BlbigpO1xuXG4gIGZvcm1WYWxpZGF0b3JzWydlbGVtZW50cy1mb3JtJ10uc2V0SW5pdGlhbEZvcm1TdGF0ZSgpO1xufSk7XG5cblxuY2hhbmdlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBhdmF0YXJQb3B1cC5vcGVuKCk7XG5cbiAgZm9ybVZhbGlkYXRvcnNbJ2F2YXRhci1mb3JtJ10uc2V0SW5pdGlhbEZvcm1TdGF0ZSgpO1xufSlcblxuXG4vKiDQktCw0LvQuNC00LDRhtC40Y8gKi9cblxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0LWJ0bicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19zdWJtaXQtYnRuX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufVxuXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge31cblxuY29uc3QgaGFuZGxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5oYW5kbGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwic2VsZWN0b3IiLCJ1c2VySWQiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVQdXRMaWtlIiwiaGFuZGxlRGVsZXRlTGlrZSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lciIsIm93bmVyIiwiX3NlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfdXNlcklkIiwiX2NhcmRJZCIsIl9pZCIsIl9oYW5kbGVQdXRMaWtlIiwiX2hhbmRsZURlbGV0ZUxpa2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl9jYXJkSUQiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RvZ2dsZUxpa2UiLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZSIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlSW1hZ2UiLCJfY2FyZExpa2VzIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsIl9nZXRFbGVtZW50IiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsImNvbmZpZyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9pbnB1dExpc3QiLCJzb21lIiwiX3N1Ym1pdEJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImV2dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsIml0ZW0iLCJjYXJkIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjYXBlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfaW5wdXRWYWx1ZUxpc3QiLCJpbnB1dCIsInZhbHVlIiwiaW5wdXRWYWx1ZUxpc3QiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlzTG9hZGluZyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VMaW5rIiwiX2ltYWdlU3VidGl0bGUiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfam9iIiwiX2F2YXRhciIsImpvYiIsInVybCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9jb25maXJtQnV0dG9uIiwiY2FsbGJhY2siLCJfc3VibWl0Q2FsbGJhY2siLCJBcGkiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiRXJyb3IiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJwbGFjZSIsImNhcmRJZCIsImF2YXRhciIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJjaGFuZ2VBdmF0YXJCdXR0b24iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJnZXRVc2VyRGF0YSIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwiZ2V0SWQiLCJjb25zb2xlIiwibG9nIiwicHJvZmlsZVBvcHVwIiwicmVuZGVyTG9hZGluZyIsInNldFVzZXJEYXRhIiwiZmluYWxseSIsImF2YXRhclBvcHVwIiwiY2hhbmdlQXZhdGFyIiwiY3JlYXRlQ2FyZCIsImltYWdlUG9wdXAiLCJvcGVuIiwiYmluZCIsImRlbGV0ZVBvcHVwIiwic2V0U3VibWl0Q2FsbGJhY2siLCJkZWxldGVDYXJkIiwicHV0TGlrZSIsImxpa2VDYXJkIiwiZGVsZXRlTGlrZSIsItGBYXJkc0xpc3QiLCJnZXRDYXJkcyIsInJlbmRlckl0ZW1zIiwiZWxlbWVudHNQb3B1cCIsImFkZE5ld0NhcmQiLCJzZXRFdmVudExpc3RlbmVycyIsInNldElucHV0VmFsdWVzIiwiZ2V0VXNlckluZm8iLCJmb3JtVmFsaWRhdG9ycyIsInNldEluaXRpYWxGb3JtU3RhdGUiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9